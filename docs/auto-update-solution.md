# è‡ªåŠ¨æ›´æ–°æ¨¡å—æŠ€æœ¯æ–¹æ¡ˆ

## éœ€æ±‚åˆ†æ

### æ ¸å¿ƒéœ€æ±‚
1. **å¯åŠ¨æ—¶æ£€æµ‹**ï¼šç¨‹åºå¯åŠ¨æ—¶åå°æ£€æµ‹æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬
2. **ç”¨æˆ·æç¤º**ï¼šå‘ç°æ–°ç‰ˆæœ¬æ—¶æç¤ºç”¨æˆ·
3. **GitHubé›†æˆ**ï¼šé€šè¿‡GitHubä»“åº“å®ç°ç‰ˆæœ¬æ£€æµ‹å’Œä¸‹è½½
4. **é¿å…é™åˆ¶**ï¼šé¿å…GitHub APIè¯·æ±‚é™åˆ¶
5. **åå°ä¸‹è½½**ï¼šæ”¯æŒåå°ä¸‹è½½æ–°ç‰ˆæœ¬

### æŠ€æœ¯æŒ‘æˆ˜
1. **GitHub APIé™åˆ¶**ï¼š
   - æœªè®¤è¯è¯·æ±‚ï¼š60æ¬¡/å°æ—¶/IP
   - è®¤è¯è¯·æ±‚ï¼š5000æ¬¡/å°æ—¶/ç”¨æˆ·
   - éœ€è¦åˆç†ç¼“å­˜å’Œè¯·æ±‚ç­–ç•¥

2. **ä¸‹è½½å¯é æ€§**ï¼š
   - å¤§æ–‡ä»¶ä¸‹è½½ï¼ˆ~168MBï¼‰
   - æ–­ç‚¹ç»­ä¼ æ”¯æŒ
   - ä¸‹è½½å¤±è´¥é‡è¯•

3. **æ›´æ–°å®‰å…¨æ€§**ï¼š
   - æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ
   - ç­¾åéªŒè¯ï¼ˆå¯é€‰ï¼‰
   - é˜²æ­¢ä¸­é—´äººæ”»å‡»

4. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - éä¾µå…¥å¼æç¤º
   - ä¸‹è½½è¿›åº¦æ˜¾ç¤º
   - å¯é€‰æ‹©è·³è¿‡ç‰ˆæœ¬

---

## ä¸»æµæ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆä¸€ï¼šåŸºäºGitHub Releases APIï¼ˆæ¨èï¼‰

#### æŠ€æœ¯æ¶æ„
```
ç¨‹åºå¯åŠ¨
    â†“
åå°çº¿ç¨‹æ£€æµ‹æ›´æ–°
    â†“
GitHub Releases API
    â†“
è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯
    â†“
ç‰ˆæœ¬å·æ¯”è¾ƒ
    â†“
[æœ‰æ–°ç‰ˆæœ¬] â†’ æç¤ºç”¨æˆ· â†’ åå°ä¸‹è½½ â†’ å®‰è£…æç¤º
[æ— æ–°ç‰ˆæœ¬] â†’ é™é»˜ç»“æŸ
```

#### æ ¸å¿ƒæŠ€æœ¯ç‚¹

**1. ç‰ˆæœ¬æ£€æµ‹**
- APIç«¯ç‚¹ï¼š`https://api.github.com/repos/{owner}/{repo}/releases/latest`
- è¿”å›æ•°æ®ï¼šç‰ˆæœ¬å·ã€å‘å¸ƒè¯´æ˜ã€ä¸‹è½½é“¾æ¥ã€æ–‡ä»¶å¤§å°ã€å‘å¸ƒæ—¶é—´
- ç¼“å­˜ç­–ç•¥ï¼šæœ¬åœ°ç¼“å­˜24å°æ—¶ï¼Œé¿å…é¢‘ç¹è¯·æ±‚

**2. é¿å…APIé™åˆ¶**
```python
# ç­–ç•¥1ï¼šä½¿ç”¨æ¡ä»¶è¯·æ±‚ï¼ˆIf-Modified-Sinceï¼‰
headers = {
    'If-Modified-Since': last_check_time,
    'User-Agent': 'TPQueryTool/3.0.0'
}

# ç­–ç•¥2ï¼šæœ¬åœ°ç¼“å­˜
cache_file = ~/.TPQueryTool/update_cache.json
cache_duration = 24 hours

# ç­–ç•¥3ï¼šä½¿ç”¨Personal Access Tokenï¼ˆå¯é€‰ï¼‰
headers = {
    'Authorization': f'token {GITHUB_TOKEN}',
    'User-Agent': 'TPQueryTool/3.0.0'
}

# ç­–ç•¥4ï¼šæ£€æŸ¥Rate Limit
rate_limit_url = 'https://api.github.com/rate_limit'
```

**3. ç‰ˆæœ¬å·æ¯”è¾ƒ**
```python
# ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰
current_version = (3, 0, 0)  # V3.0.0
latest_version = (3, 1, 0)   # V3.1.0

# æ¯”è¾ƒé€»è¾‘
def is_newer_version(latest, current):
    return latest > current
```

**4. æ–‡ä»¶ä¸‹è½½**
```python
# ä½¿ç”¨requestsåº“ï¼Œæ”¯æŒæµå¼ä¸‹è½½
response = requests.get(download_url, stream=True)
total_size = int(response.headers.get('content-length', 0))

# åˆ†å—ä¸‹è½½ï¼Œæ˜¾ç¤ºè¿›åº¦
with open(temp_file, 'wb') as f:
    for chunk in response.iter_content(chunk_size=8192):
        f.write(chunk)
        progress = (downloaded / total_size) * 100
```

**5. æ–‡ä»¶æ ¡éªŒ**
```python
# ä½¿ç”¨SHA256æ ¡éªŒ
import hashlib

def verify_file(file_path, expected_hash):
    sha256 = hashlib.sha256()
    with open(file_path, 'rb') as f:
        for chunk in iter(lambda: f.read(4096), b''):
            sha256.update(chunk)
    return sha256.hexdigest() == expected_hash
```

#### ä¼˜ç‚¹
- âœ… å®˜æ–¹æ”¯æŒï¼Œç¨³å®šå¯é 
- âœ… è‡ªåŠ¨æ‰˜ç®¡æ–‡ä»¶ï¼Œæ— éœ€é¢å¤–æœåŠ¡å™¨
- âœ… æ”¯æŒRelease Noteså±•ç¤º
- âœ… æ”¯æŒå¤šæ–‡ä»¶ä¸‹è½½
- âœ… å…è´¹ä½¿ç”¨

#### ç¼ºç‚¹
- âš ï¸ APIæœ‰è¯·æ±‚é™åˆ¶ï¼ˆéœ€è¦ç¼“å­˜ç­–ç•¥ï¼‰
- âš ï¸ å›½å†…è®¿é—®å¯èƒ½è¾ƒæ…¢ï¼ˆå¯ä½¿ç”¨é•œåƒï¼‰
- âš ï¸ éœ€è¦æ‰‹åŠ¨å‘å¸ƒRelease

#### å®ç°å¤æ‚åº¦
- ğŸŸ¢ ä½ï¼šä½¿ç”¨æˆç†Ÿçš„requestsåº“
- ğŸŸ¢ æ— éœ€é¢å¤–æœåŠ¡å™¨
- ğŸŸ¢ ä»£ç é‡çº¦300-500è¡Œ

---

### æ–¹æ¡ˆäºŒï¼šåŸºäºGitHub Rawæ–‡ä»¶

#### æŠ€æœ¯æ¶æ„
```
ç¨‹åºå¯åŠ¨
    â†“
åå°çº¿ç¨‹æ£€æµ‹æ›´æ–°
    â†“
è¯»å–version.json (GitHub Raw)
    â†“
ç‰ˆæœ¬å·æ¯”è¾ƒ
    â†“
[æœ‰æ–°ç‰ˆæœ¬] â†’ æç¤ºç”¨æˆ· â†’ ä»Releaseä¸‹è½½ â†’ å®‰è£…æç¤º
```

#### æ ¸å¿ƒæŠ€æœ¯ç‚¹

**1. ç‰ˆæœ¬æ–‡ä»¶**
```json
// https://raw.githubusercontent.com/{owner}/{repo}/main/version.json
{
    "version": "3.1.0",
    "version_code": 30100,
    "release_date": "2026-02-25",
    "download_url": "https://github.com/{owner}/{repo}/releases/download/v3.1.0/æŸ¥è¯¢å·¥å…·.exe",
    "file_size": 176222586,
    "sha256": "abc123...",
    "release_notes": "- æ–°å¢è‡ªåŠ¨æ›´æ–°åŠŸèƒ½\n- ä¿®å¤å·²çŸ¥é—®é¢˜",
    "min_version": "3.0.0"
}
```

**2. é¿å…APIé™åˆ¶**
- Rawæ–‡ä»¶ä¸è®¡å…¥APIé™åˆ¶
- å¯ä»¥ä½¿ç”¨CDNåŠ é€Ÿï¼ˆjsDelivrï¼‰
- ç¼“å­˜ç­–ç•¥ï¼šæœ¬åœ°ç¼“å­˜12-24å°æ—¶

**3. CDNåŠ é€Ÿ**
```python
# ä½¿ç”¨jsDelivr CDN
cdn_url = f'https://cdn.jsdelivr.net/gh/{owner}/{repo}@main/version.json'

# æˆ–ä½¿ç”¨Statically CDN
cdn_url = f'https://cdn.statically.io/gh/{owner}/{repo}/main/version.json'
```

#### ä¼˜ç‚¹
- âœ… ä¸å—APIé™åˆ¶
- âœ… å¯ä½¿ç”¨CDNåŠ é€Ÿ
- âœ… å®ç°ç®€å•
- âœ… å›½å†…è®¿é—®å‹å¥½ï¼ˆä½¿ç”¨CDNï¼‰

#### ç¼ºç‚¹
- âš ï¸ éœ€è¦æ‰‹åŠ¨ç»´æŠ¤version.json
- âš ï¸ ç¼ºå°‘GitHub Releasesçš„å…ƒæ•°æ®
- âš ï¸ éœ€è¦é¢å¤–çš„æ–‡ä»¶ç®¡ç†

#### å®ç°å¤æ‚åº¦
- ğŸŸ¢ ä½ï¼šå®ç°æœ€ç®€å•
- ğŸŸ¢ æ— éœ€é¢å¤–æœåŠ¡å™¨
- ğŸŸ¢ ä»£ç é‡çº¦200-300è¡Œ

---

### æ–¹æ¡ˆä¸‰ï¼šæ··åˆæ–¹æ¡ˆï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

#### æŠ€æœ¯æ¶æ„
```
ç¨‹åºå¯åŠ¨
    â†“
åå°çº¿ç¨‹æ£€æµ‹æ›´æ–°
    â†“
ä¼˜å…ˆè¯»å–version.json (CDN)
    â†“
[å¤±è´¥] â†’ é™çº§åˆ°GitHub API
    â†“
ç‰ˆæœ¬å·æ¯”è¾ƒ
    â†“
[æœ‰æ–°ç‰ˆæœ¬] â†’ æç¤ºç”¨æˆ· â†’ å¤šæºä¸‹è½½ â†’ å®‰è£…æç¤º
```

#### æ ¸å¿ƒæŠ€æœ¯ç‚¹

**1. å¤šæºæ£€æµ‹**
```python
# æ£€æµ‹é¡ºåº
sources = [
    'https://cdn.jsdelivr.net/gh/{owner}/{repo}@main/version.json',  # CDN
    'https://raw.githubusercontent.com/{owner}/{repo}/main/version.json',  # Raw
    'https://api.github.com/repos/{owner}/{repo}/releases/latest'  # API
]

# ä¾æ¬¡å°è¯•ï¼Œç¬¬ä¸€ä¸ªæˆåŠŸå³è¿”å›
for source in sources:
    try:
        version_info = fetch_version(source)
        if version_info:
            return version_info
    except Exception as e:
        logger.warning(f"Failed to fetch from {source}: {e}")
        continue
```

**2. å¤šæºä¸‹è½½**
```python
# ä¸‹è½½æºåˆ—è¡¨
download_sources = [
    'https://github.com/{owner}/{repo}/releases/download/{tag}/{file}',  # GitHub
    'https://ghproxy.com/https://github.com/{owner}/{repo}/releases/download/{tag}/{file}',  # ä»£ç†
    'https://mirror.ghproxy.com/https://github.com/{owner}/{repo}/releases/download/{tag}/{file}'  # é•œåƒ
]

# è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„æº
def download_with_fallback(sources, dest_path):
    for source in sources:
        try:
            download_file(source, dest_path)
            return True
        except Exception as e:
            logger.warning(f"Download failed from {source}: {e}")
            continue
    return False
```

**3. æ™ºèƒ½ç¼“å­˜**
```python
# ç¼“å­˜ç­–ç•¥
cache_config = {
    'version_check': {
        'duration': 24 * 3600,  # 24å°æ—¶
        'file': '~/.TPQueryTool/update_cache.json'
    },
    'download': {
        'temp_dir': '~/.TPQueryTool/downloads',
        'keep_days': 7  # ä¿ç•™7å¤©
    }
}
```

#### ä¼˜ç‚¹
- âœ… é«˜å¯ç”¨æ€§ï¼ˆå¤šæºå®¹é”™ï¼‰
- âœ… å›½å†…å¤–éƒ½å‹å¥½
- âœ… ä¸å—APIé™åˆ¶
- âœ… ä¸‹è½½é€Ÿåº¦å¿«

#### ç¼ºç‚¹
- âš ï¸ å®ç°å¤æ‚åº¦è¾ƒé«˜
- âš ï¸ éœ€è¦ç»´æŠ¤å¤šä¸ªé…ç½®

#### å®ç°å¤æ‚åº¦
- ğŸŸ¡ ä¸­ï¼šéœ€è¦å¤„ç†å¤šæºé€»è¾‘
- ğŸŸ¢ æ— éœ€é¢å¤–æœåŠ¡å™¨
- ğŸŸ¡ ä»£ç é‡çº¦500-800è¡Œ

---

## UI/UXè®¾è®¡æ–¹æ¡ˆ

### 1. æ£€æµ‹é˜¶æ®µï¼ˆé™é»˜ï¼‰
```
[ç¨‹åºå¯åŠ¨]
    â†“
[åå°çº¿ç¨‹] æ£€æµ‹æ›´æ–°ä¸­...
    â†“
[æ— æ–°ç‰ˆæœ¬] â†’ é™é»˜ç»“æŸ
[æœ‰æ–°ç‰ˆæœ¬] â†’ æ˜¾ç¤ºæç¤º
[æ£€æµ‹å¤±è´¥] â†’ é™é»˜ç»“æŸï¼ˆè®°å½•æ—¥å¿—ï¼‰
```

### 2. æç¤ºå¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘ç°æ–°ç‰ˆæœ¬                      [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å½“å‰ç‰ˆæœ¬: V3.0.0                   â”‚
â”‚  æœ€æ–°ç‰ˆæœ¬: V3.1.0                   â”‚
â”‚  å‘å¸ƒæ—¥æœŸ: 2026-02-25               â”‚
â”‚                                      â”‚
â”‚  æ›´æ–°å†…å®¹:                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ - æ–°å¢è‡ªåŠ¨æ›´æ–°åŠŸèƒ½          â”‚   â”‚
â”‚  â”‚ - ä¿®å¤å·²çŸ¥é—®é¢˜              â”‚   â”‚
â”‚  â”‚ - ä¼˜åŒ–æ€§èƒ½                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  æ–‡ä»¶å¤§å°: 168 MB                   â”‚
â”‚                                      â”‚
â”‚  [ç«‹å³æ›´æ–°]  [ç¨åæé†’]  [è·³è¿‡æ­¤ç‰ˆæœ¬] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ä¸‹è½½è¿›åº¦å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­£åœ¨ä¸‹è½½æ›´æ–°                    [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸‹è½½è¿›åº¦:                          â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  65%          â”‚
â”‚                                      â”‚
â”‚  å·²ä¸‹è½½: 109 MB / 168 MB            â”‚
â”‚  ä¸‹è½½é€Ÿåº¦: 2.5 MB/s                 â”‚
â”‚  å‰©ä½™æ—¶é—´: çº¦ 24 ç§’                 â”‚
â”‚                                      â”‚
â”‚  [æš‚åœ]  [å–æ¶ˆ]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ä¸‹è½½å®Œæˆæç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ›´æ–°å·²ä¸‹è½½                      [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ–°ç‰ˆæœ¬å·²ä¸‹è½½å®Œæˆï¼Œéœ€è¦é‡å¯ç¨‹åº     â”‚
â”‚  æ‰èƒ½å®Œæˆæ›´æ–°ã€‚                     â”‚
â”‚                                      â”‚
â”‚  æ˜¯å¦ç«‹å³é‡å¯ï¼Ÿ                     â”‚
â”‚                                      â”‚
â”‚  [ç«‹å³é‡å¯]  [ç¨åé‡å¯]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ¨¡å—ç»“æ„
```
query_tool/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ updater.py          # æ›´æ–°ç®¡ç†å™¨
â”‚   â”œâ”€â”€ version_checker.py  # ç‰ˆæœ¬æ£€æµ‹
â”‚   â”œâ”€â”€ downloader.py       # æ–‡ä»¶ä¸‹è½½å™¨
â”‚   â””â”€â”€ installer.py        # å®‰è£…å™¨
â””â”€â”€ widgets/
    â””â”€â”€ update_dialog.py    # æ›´æ–°å¯¹è¯æ¡†
```

### 2. æ ¸å¿ƒç±»è®¾è®¡

```python
# updater.py
class UpdateManager:
    """æ›´æ–°ç®¡ç†å™¨"""
    def __init__(self):
        self.checker = VersionChecker()
        self.downloader = Downloader()
        self.installer = Installer()
    
    def check_update(self, silent=True):
        """æ£€æµ‹æ›´æ–°"""
        pass
    
    def download_update(self, version_info, callback=None):
        """ä¸‹è½½æ›´æ–°"""
        pass
    
    def install_update(self, file_path):
        """å®‰è£…æ›´æ–°"""
        pass

# version_checker.py
class VersionChecker:
    """ç‰ˆæœ¬æ£€æµ‹å™¨"""
    def get_latest_version(self):
        """è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯"""
        pass
    
    def compare_version(self, current, latest):
        """æ¯”è¾ƒç‰ˆæœ¬å·"""
        pass
    
    def should_check(self):
        """æ˜¯å¦åº”è¯¥æ£€æµ‹ï¼ˆåŸºäºç¼“å­˜ï¼‰"""
        pass

# downloader.py
class Downloader:
    """æ–‡ä»¶ä¸‹è½½å™¨"""
    def download(self, url, dest_path, progress_callback=None):
        """ä¸‹è½½æ–‡ä»¶"""
        pass
    
    def verify_file(self, file_path, expected_hash):
        """æ ¡éªŒæ–‡ä»¶"""
        pass
    
    def resume_download(self, url, dest_path):
        """æ–­ç‚¹ç»­ä¼ """
        pass

# installer.py
class Installer:
    """å®‰è£…å™¨"""
    def install(self, file_path):
        """å®‰è£…æ›´æ–°ï¼ˆé‡å¯ç¨‹åºï¼‰"""
        pass
    
    def backup_current(self):
        """å¤‡ä»½å½“å‰ç‰ˆæœ¬"""
        pass
```

### 3. é…ç½®ç®¡ç†

```python
# æ›´æ–°é…ç½®
UPDATE_CONFIG = {
    'github': {
        'owner': 'your-username',
        'repo': 'query-tool',
        'token': None  # å¯é€‰ï¼Œç”¨äºæé«˜APIé™åˆ¶
    },
    'check': {
        'on_startup': True,
        'interval': 24 * 3600,  # 24å°æ—¶
        'silent': True
    },
    'download': {
        'temp_dir': '~/.TPQueryTool/downloads',
        'chunk_size': 8192,
        'timeout': 30,
        'retry': 3
    },
    'sources': {
        'cdn': 'https://cdn.jsdelivr.net/gh/{owner}/{repo}@main/version.json',
        'raw': 'https://raw.githubusercontent.com/{owner}/{repo}/main/version.json',
        'api': 'https://api.github.com/repos/{owner}/{repo}/releases/latest'
    }
}
```

### 4. ç¼“å­˜ç­–ç•¥

```python
# ç¼“å­˜æ–‡ä»¶ç»“æ„
{
    "last_check_time": "2026-02-24T15:30:00",
    "latest_version": "3.1.0",
    "version_info": {
        "version": "3.1.0",
        "download_url": "...",
        "release_notes": "...",
        "file_size": 176222586,
        "sha256": "..."
    },
    "skipped_versions": ["3.0.1"],
    "download_progress": {
        "file_path": "/tmp/update.exe",
        "downloaded": 50000000,
        "total": 176222586
    }
}
```

---

## version.json æ ¼å¼è¯´æ˜

### å­—æ®µå®šä¹‰

```json
{
  "version": "3.1.0",                    // ç‰ˆæœ¬å·ï¼ˆå¿…éœ€ï¼‰
  "build_date": "20260224",              // ç¼–è¯‘æ—¥æœŸï¼ˆå¿…éœ€ï¼‰
  "download_url": "https://...",         // ä¸‹è½½é“¾æ¥ï¼ˆå¿…éœ€ï¼‰
  "file_size_mb": 168.06,                // æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰ï¼ˆå¿…éœ€ï¼‰
  "release_notes_url": "https://...",    // Release è¯´æ˜é“¾æ¥ï¼ˆå¯é€‰ï¼‰
  "min_version": "3.0.0",                // æœ€ä½å…¼å®¹ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
  "update_strategy": "prompt",           // æ›´æ–°ç­–ç•¥ï¼ˆå¿…éœ€ï¼‰
  "changelog": [                         // æ›´æ–°æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
    "æ–°åŠŸèƒ½1",
    "æ–°åŠŸèƒ½2"
  ]
}
```

### update_strategy æ›´æ–°ç­–ç•¥

| å€¼ | è¯´æ˜ | è¡Œä¸º |
|---|---|---|
| `manual` | æ‰‹åŠ¨æ›´æ–° | ä¸ä¸»åŠ¨æ£€æµ‹æ›´æ–°ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨æ£€æŸ¥ |
| `prompt` | æç¤ºæ›´æ–° | æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬æ—¶å¼¹çª—æç¤ºï¼Œç”¨æˆ·é€‰æ‹©æ˜¯å¦æ›´æ–° |
| `silent` | é™é»˜æ›´æ–° | åå°è‡ªåŠ¨ä¸‹è½½ï¼Œç¨‹åºå…³é—­æ—¶è‡ªåŠ¨æ›¿æ¢ |

### ä½¿ç”¨ç¤ºä¾‹

**æç¤ºæ›´æ–°ï¼ˆæ¨èï¼‰**ï¼š
```json
{
  "version": "3.1.0",
  "update_strategy": "prompt",
  ...
}
```

**é™é»˜æ›´æ–°**ï¼š
```json
{
  "version": "3.1.0",
  "update_strategy": "silent",
  ...
}
```

**æ‰‹åŠ¨æ›´æ–°**ï¼š
```json
{
  "version": "3.1.0",
  "update_strategy": "manual",
  ...
}
```

---

## å®‰å…¨è€ƒè™‘

### 1. æ–‡ä»¶å®Œæ•´æ€§
- âœ… SHA256æ ¡éªŒ
- âœ… æ–‡ä»¶å¤§å°éªŒè¯
- âœ… ä¸‹è½½æºéªŒè¯

### 2. ä¼ è¾“å®‰å…¨
- âœ… ä½¿ç”¨HTTPS
- âœ… è¯ä¹¦éªŒè¯
- âœ… é˜²æ­¢ä¸­é—´äººæ”»å‡»

### 3. æ‰§è¡Œå®‰å…¨
- âœ… å¤‡ä»½å½“å‰ç‰ˆæœ¬
- âœ… æ›´æ–°å¤±è´¥å›æ»š
- âœ… æƒé™æ£€æŸ¥

### 4. éšç§ä¿æŠ¤
- âœ… ä¸æ”¶é›†ç”¨æˆ·ä¿¡æ¯
- âœ… æœ¬åœ°ç¼“å­˜åŠ å¯†ï¼ˆå¯é€‰ï¼‰
- âœ… åŒ¿åç»Ÿè®¡ï¼ˆå¯é€‰ï¼‰

---

## å®æ–½å»ºè®®

### é˜¶æ®µä¸€ï¼šåŸºç¡€åŠŸèƒ½ï¼ˆMVPï¼‰
1. å®ç°ç‰ˆæœ¬æ£€æµ‹ï¼ˆGitHub Releases APIï¼‰
2. å®ç°ç®€å•çš„æ›´æ–°æç¤º
3. æ‰‹åŠ¨ä¸‹è½½é“¾æ¥è·³è½¬
4. é¢„è®¡å·¥ä½œé‡ï¼š2-3å¤©

### é˜¶æ®µäºŒï¼šè‡ªåŠ¨ä¸‹è½½
1. å®ç°åå°ä¸‹è½½
2. ä¸‹è½½è¿›åº¦æ˜¾ç¤º
3. æ–‡ä»¶æ ¡éªŒ
4. é¢„è®¡å·¥ä½œé‡ï¼š2-3å¤©

### é˜¶æ®µä¸‰ï¼šä¼˜åŒ–å¢å¼º
1. å¤šæºå®¹é”™
2. æ–­ç‚¹ç»­ä¼ 
3. è‡ªåŠ¨å®‰è£…
4. é¢„è®¡å·¥ä½œé‡ï¼š3-5å¤©

---

## æ¨èæ–¹æ¡ˆ

### å¯¹äºå½“å‰é¡¹ç›®ï¼Œæ¨èï¼š**æ–¹æ¡ˆä¸‰ï¼ˆæ··åˆæ–¹æ¡ˆï¼‰**

**ç†ç”±ï¼š**
1. âœ… é«˜å¯ç”¨æ€§ï¼šå¤šæºå®¹é”™ï¼Œå›½å†…å¤–éƒ½èƒ½ç”¨
2. âœ… ç”¨æˆ·ä½“éªŒå¥½ï¼šä¸‹è½½é€Ÿåº¦å¿«ï¼ŒæˆåŠŸç‡é«˜
3. âœ… ç»´æŠ¤æˆæœ¬ä½ï¼šè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜
4. âœ… æ‰©å±•æ€§å¼ºï¼šæ˜“äºæ·»åŠ æ–°çš„ä¸‹è½½æº

**å®æ–½æ­¥éª¤ï¼š**
1. å…ˆå®ç°åŸºäºGitHub Releases APIçš„åŸºç¡€ç‰ˆæœ¬æ£€æµ‹
2. æ·»åŠ version.jsonæ–‡ä»¶å’ŒCDNæ”¯æŒ
3. å®ç°å¤šæºä¸‹è½½é€»è¾‘
4. æ·»åŠ UIç•Œé¢å’Œç”¨æˆ·äº¤äº’
5. æµ‹è¯•å’Œä¼˜åŒ–

**é¢„è®¡æ€»å·¥ä½œé‡ï¼š5-7å¤©**

---

## å‚è€ƒèµ„æº

### å¼€æºé¡¹ç›®å‚è€ƒ
1. **Electron Auto Updater**
   - æˆç†Ÿçš„è‡ªåŠ¨æ›´æ–°æ¡†æ¶
   - æ”¯æŒå¤šå¹³å°
   - GitHub: electron/electron

2. **PyUpdater**
   - Pythonåº”ç”¨è‡ªåŠ¨æ›´æ–°æ¡†æ¶
   - æ”¯æŒä»£ç ç­¾å
   - GitHub: Digital-Sapphire/PyUpdater

3. **Sparkle**
   - macOSåº”ç”¨æ›´æ–°æ¡†æ¶
   - ä¸šç•Œæ ‡å‡†
   - GitHub: sparkle-project/Sparkle

### æŠ€æœ¯æ–‡æ¡£
1. GitHub Releases API: https://docs.github.com/en/rest/releases
2. GitHub Rate Limiting: https://docs.github.com/en/rest/overview/resources-in-the-rest-api#rate-limiting
3. Semantic Versioning: https://semver.org/

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-24  
**ä½œè€…**: Kiro AI Assistant
