# è‡ªåŠ¨æ›´æ–°ç­–ç•¥é…ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

version.json ä¸­çš„ `update_strategy` å­—æ®µç”¨äºæ§åˆ¶ç¨‹åºçš„è‡ªåŠ¨æ›´æ–°è¡Œä¸ºã€‚

## ğŸ¯ æ›´æ–°ç­–ç•¥ç±»å‹

### 1. manual - æ‰‹åŠ¨æ›´æ–°

**è¡Œä¸º**ï¼š
- âŒ ä¸ä¸»åŠ¨æ£€æµ‹æ›´æ–°
- âŒ ä¸å¼¹å‡ºæ›´æ–°æç¤º
- âœ… ç”¨æˆ·éœ€è¦æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°ï¼ˆé€šè¿‡èœå•æˆ–è®¾ç½®ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- ä¼ä¸šå†…ç½‘ç¯å¢ƒï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç†æ›´æ–°
- å¯¹ç¨³å®šæ€§è¦æ±‚æé«˜ï¼Œä¸å¸Œæœ›è‡ªåŠ¨æ›´æ–°
- æµ‹è¯•ç¯å¢ƒï¼Œéœ€è¦å›ºå®šç‰ˆæœ¬

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "version": "3.1.0",
  "update_strategy": "manual",
  ...
}
```

---

### 2. prompt - æç¤ºæ›´æ–°ï¼ˆæ¨èï¼‰â­

**è¡Œä¸º**ï¼š
- âœ… å¯åŠ¨æ—¶åå°æ£€æµ‹æ›´æ–°
- âœ… å‘ç°æ–°ç‰ˆæœ¬æ—¶å¼¹çª—æç¤º
- âœ… ç”¨æˆ·é€‰æ‹©æ˜¯å¦ç«‹å³æ›´æ–°
- âœ… å¯ä»¥é€‰æ‹©"è·³è¿‡æ­¤ç‰ˆæœ¬"
- âœ… å¯ä»¥é€‰æ‹©"ç¨åæé†’"

**é€‚ç”¨åœºæ™¯**ï¼š
- å¤§å¤šæ•°ç”¨æˆ·åœºæ™¯ï¼ˆæ¨èï¼‰
- éœ€è¦ç”¨æˆ·çŸ¥æƒ…å¹¶åŒæ„æ›´æ–°
- å…è®¸ç”¨æˆ·é€‰æ‹©æ›´æ–°æ—¶æœº

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "version": "3.1.0",
  "update_strategy": "prompt",
  ...
}
```

**ç”¨æˆ·ä½“éªŒ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘ç°æ–°ç‰ˆæœ¬ V3.1.0                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å½“å‰ç‰ˆæœ¬ï¼šV3.0.0                    â”‚
â”‚  æ–°ç‰ˆæœ¬ï¼šV3.1.0                      â”‚
â”‚  æ–‡ä»¶å¤§å°ï¼š168.06 MB                 â”‚
â”‚                                     â”‚
â”‚  æ›´æ–°å†…å®¹ï¼š                          â”‚
â”‚  â€¢ GitHub Actions è‡ªåŠ¨å‘å¸ƒ          â”‚
â”‚  â€¢ è‡ªåŠ¨æ›´æ–°æ¨¡å—è®¾è®¡                  â”‚
â”‚  â€¢ ä»£ç ç»“æ„ä¼˜åŒ–                      â”‚
â”‚                                     â”‚
â”‚  [ç«‹å³æ›´æ–°] [ç¨åæé†’] [è·³è¿‡æ­¤ç‰ˆæœ¬]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. silent - é™é»˜æ›´æ–°

**è¡Œä¸º**ï¼š
- âœ… å¯åŠ¨æ—¶åå°æ£€æµ‹æ›´æ–°
- âœ… è‡ªåŠ¨åå°ä¸‹è½½æ–°ç‰ˆæœ¬
- âœ… ä¸‹è½½å®Œæˆåä¸æ‰“æ‰°ç”¨æˆ·
- âœ… ç¨‹åºå…³é—­æ—¶è‡ªåŠ¨æ›¿æ¢
- âœ… ä¸‹æ¬¡å¯åŠ¨æ—¶å·²æ˜¯æ–°ç‰ˆæœ¬

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦å¿«é€Ÿæ¨é€é‡è¦æ›´æ–°
- ç”¨æˆ·ä¸å…³å¿ƒæ›´æ–°ç»†èŠ‚
- å¸Œæœ›æœ€å°åŒ–ç”¨æˆ·å¹²é¢„

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "version": "3.1.0",
  "update_strategy": "silent",
  ...
}
```

**ç”¨æˆ·ä½“éªŒ**ï¼š
```
ç¨‹åºæ­£å¸¸è¿è¡Œä¸­...
ï¼ˆåå°é™é»˜ä¸‹è½½æ›´æ–°ï¼‰

ç”¨æˆ·å…³é—­ç¨‹åº
  â†“
è‡ªåŠ¨æ›¿æ¢ä¸ºæ–°ç‰ˆæœ¬
  â†“
ä¸‹æ¬¡å¯åŠ¨æ—¶æ˜¾ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·²æ›´æ–°åˆ° V3.1.0                     â”‚
â”‚  æŸ¥çœ‹æ›´æ–°å†…å®¹ >                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ å¦‚ä½•ä¿®æ”¹æ›´æ–°ç­–ç•¥

### æ–¹æ³•ä¸€ï¼šä¿®æ”¹ GitHub Actions å·¥ä½œæµ

ç¼–è¾‘ `.github/workflows/release.yml`ï¼š

```yaml
# ç”Ÿæˆ version.json
$versionJson = @"
{
  "version": "$version",
  "update_strategy": "prompt",  # â† ä¿®æ”¹è¿™é‡Œ
  ...
}
"@
```

å¯é€‰å€¼ï¼š
- `"manual"` - æ‰‹åŠ¨æ›´æ–°
- `"prompt"` - æç¤ºæ›´æ–°ï¼ˆæ¨èï¼‰
- `"silent"` - é™é»˜æ›´æ–°

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ç¼–è¾‘ version.json

å¦‚æœå·²ç»å‘å¸ƒäº† Releaseï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘ version.jsonï¼š

1. åœ¨ GitHub ä»“åº“ä¸­æ‰¾åˆ° `version.json` æ–‡ä»¶
2. ç‚¹å‡»ç¼–è¾‘
3. ä¿®æ”¹ `update_strategy` å­—æ®µ
4. æäº¤æ›´æ”¹

```json
{
  "version": "3.1.0",
  "update_strategy": "silent",  // æ”¹ä¸º silent
  ...
}
```

---

## ğŸ“Š ç­–ç•¥å¯¹æ¯”

| ç‰¹æ€§ | manual | prompt | silent |
|-----|--------|--------|--------|
| è‡ªåŠ¨æ£€æµ‹æ›´æ–° | âŒ | âœ… | âœ… |
| å¼¹çª—æç¤º | âŒ | âœ… | âŒ |
| ç”¨æˆ·é€‰æ‹© | âœ… | âœ… | âŒ |
| åå°ä¸‹è½½ | âŒ | âœ… | âœ… |
| è‡ªåŠ¨æ›¿æ¢ | âŒ | âŒ | âœ… |
| ç”¨æˆ·å¹²é¢„ | é«˜ | ä¸­ | ä½ |
| æ›´æ–°é€Ÿåº¦ | æ…¢ | ä¸­ | å¿« |

---

## ğŸ’¡ æœ€ä½³å®è·µ

### æ¨èç­–ç•¥

1. **æ­£å¼ç‰ˆæœ¬**ï¼šä½¿ç”¨ `prompt`
   - è®©ç”¨æˆ·çŸ¥æƒ…å¹¶é€‰æ‹©
   - å¹³è¡¡ç”¨æˆ·ä½“éªŒå’Œæ›´æ–°é€Ÿåº¦

2. **ç´§æ€¥ä¿®å¤**ï¼šä½¿ç”¨ `silent`
   - å¿«é€Ÿæ¨é€å®‰å…¨è¡¥ä¸
   - æœ€å°åŒ–ç”¨æˆ·å¹²é¢„

3. **ä¼ä¸šç‰ˆæœ¬**ï¼šä½¿ç”¨ `manual`
   - IT éƒ¨é—¨ç»Ÿä¸€ç®¡ç†
   - ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§

### ç‰ˆæœ¬ç­–ç•¥ç¤ºä¾‹

```json
// V3.1.0 - å¸¸è§„æ›´æ–°ï¼Œä½¿ç”¨æç¤ºç­–ç•¥
{
  "version": "3.1.0",
  "update_strategy": "prompt"
}

// V3.1.1 - ç´§æ€¥å®‰å…¨ä¿®å¤ï¼Œä½¿ç”¨é™é»˜ç­–ç•¥
{
  "version": "3.1.1",
  "update_strategy": "silent"
}

// V3.2.0 - å¤§ç‰ˆæœ¬æ›´æ–°ï¼Œä½¿ç”¨æç¤ºç­–ç•¥
{
  "version": "3.2.0",
  "update_strategy": "prompt"
}
```

---

## ğŸ” å®ç°ç»†èŠ‚

### æ£€æµ‹æ›´æ–°æµç¨‹

```python
def check_update():
    # 1. è¯»å– version.json
    version_info = fetch_version_json()
    
    # 2. è·å–æ›´æ–°ç­–ç•¥
    strategy = version_info.get('update_strategy', 'prompt')
    
    # 3. æ ¹æ®ç­–ç•¥æ‰§è¡Œ
    if strategy == 'manual':
        return  # ä¸åšä»»ä½•æ“ä½œ
    
    elif strategy == 'prompt':
        if has_new_version():
            show_update_dialog()  # å¼¹çª—æç¤º
    
    elif strategy == 'silent':
        if has_new_version():
            download_in_background()  # åå°ä¸‹è½½
            schedule_update_on_exit()  # é€€å‡ºæ—¶æ›´æ–°
```

### é…ç½®ä¼˜å…ˆçº§

1. **version.json ä¸­çš„ç­–ç•¥**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. **ç”¨æˆ·æœ¬åœ°è®¾ç½®**ï¼ˆå¦‚æœå…è®¸ç”¨æˆ·è¦†ç›–ï¼‰
3. **ç¨‹åºé»˜è®¤ç­–ç•¥**ï¼ˆfallbackï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è‡ªåŠ¨æ›´æ–°æŠ€æœ¯æ–¹æ¡ˆ](./auto-update-solution.md)
- [é™é»˜æ›´æ–°å®ç°æŒ‡å—](./silent-update-guide.md)
- [GitHub Actions é…ç½®æŒ‡å—](./github-actions-guide.md)

---

**æœ€åæ›´æ–°**: 2026-02-24
